!function(u,c){var m;u.rails!==c&&u.error("jquery-ujs has already been loaded!");var e=u(document);u.rails=m={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return u("meta[name=csrf-token]").attr("content")},csrfParam:function(){return u("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=m.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){u('form input[name="'+m.csrfParam()+'"]').val(m.csrfToken())},fire:function(e,t,a){var n=u.Event(t);return e.trigger(n,a),!1!==n.result},confirm:function(e){return confirm(e)},ajax:function(e){return u.ajax(e)},href:function(e){return e.attr("href")},handleRemote:function(n){var e,t,a,i,r,o,l,s;if(m.fire(n,"ajax:before")){if(r=(i=n.data("cross-domain"))===c?null:i,o=n.data("with-credentials")||null,l=n.data("type")||u.ajaxSettings&&u.ajaxSettings.dataType,n.is("form")){e=n.attr("method"),t=n.attr("action"),a=n.serializeArray();var d=n.data("ujs:submit-button");d&&(a.push(d),n.data("ujs:submit-button",null))}else n.is(m.inputChangeSelector)?(e=n.data("method"),t=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):n.is(m.buttonClickSelector)?(e=n.data("method")||"get",t=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(e=n.data("method"),t=m.href(n),a=n.data("params")||null);return s={type:e||"GET",data:a,dataType:l,beforeSend:function(e,t){if(t.dataType===c&&e.setRequestHeader("accept","*/*;q=0.5, "+t.accepts.script),!m.fire(n,"ajax:beforeSend",[e,t]))return!1;n.trigger("ajax:send",e)},success:function(e,t,a){n.trigger("ajax:success",[e,t,a])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,a){n.trigger("ajax:error",[e,t,a])},crossDomain:r},o&&(s.xhrFields={withCredentials:o}),t&&(s.url=t),m.ajax(s)}return!1},handleMethod:function(e){var t=m.href(e),a=e.data("method"),n=e.attr("target"),i=m.csrfToken(),r=m.csrfParam(),o=u('<form method="post" action="'+t+'"></form>'),l='<input name="_method" value="'+a+'" type="hidden" />';r!==c&&i!==c&&(l+='<input name="'+r+'" value="'+i+'" type="hidden" />'),n&&o.attr("target",n),o.hide().append(l).appendTo("body"),o.submit()},formElements:function(e,t){return e.is("form")?u(e[0].elements).filter(t):e.find(t)},disableFormElements:function(e){m.formElements(e,m.disableSelector).each(function(){m.disableFormElement(u(this))})},disableFormElement:function(e){var t,a;t=e.is("button")?"html":"val",a=e.data("disable-with"),e.data("ujs:enable-with",e[t]()),a!==c&&e[t](a),e.prop("disabled",!0)},enableFormElements:function(e){m.formElements(e,m.enableSelector).each(function(){m.enableFormElement(u(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,a=e.data("confirm"),n=!1;return!a||(m.fire(e,"confirm")&&(n=m.confirm(a),t=m.fire(e,"confirm:complete",[n])),n&&t)},blankInputs:function(e,t,a){var n,i=u(),r=t||"input,textarea",o=e.find(r);return o.each(function(){if(n=u(this),!(n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):n.val())==!a){if(n.is("input[type=radio]")&&o.filter('input[type=radio]:checked[name="'+n.attr("name")+'"]').length)return!0;i=i.add(n)}}),!!i.length&&i},nonBlankInputs:function(e,t){return m.blankInputs(e,t,!0)},stopEverything:function(e){return u(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(e){var t=e.data("disable-with");e.data("ujs:enable-with",e.html()),t!==c&&e.html(t),e.bind("click.railsDisable",function(e){return m.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==c&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},m.fire(e,"rails:attachBindings")&&(u.ajaxPrefilter(function(e,t,a){e.crossDomain||m.CSRFProtection(a)}),u(window).on("pageshow.rails",function(){u(u.rails.enableSelector).each(function(){var e=u(this);e.data("ujs:enable-with")&&u.rails.enableFormElement(e)}),u(u.rails.linkDisableSelector).each(function(){var e=u(this);e.data("ujs:enable-with")&&u.rails.enableElement(e)})}),e.delegate(m.linkDisableSelector,"ajax:complete",function(){m.enableElement(u(this))}),e.delegate(m.buttonDisableSelector,"ajax:complete",function(){m.enableFormElement(u(this))}),e.delegate(m.linkClickSelector,"click.rails",function(e){var t=u(this),a=t.data("method"),n=t.data("params"),i=e.metaKey||e.ctrlKey;if(!m.allowAction(t))return m.stopEverything(e);if(!i&&t.is(m.linkDisableSelector)&&m.disableElement(t),t.data("remote")===c)return a?(m.handleMethod(t),!1):void 0;if(i&&(!a||"GET"===a)&&!n)return!0;var r=m.handleRemote(t);return!1===r?m.enableElement(t):r.fail(function(){m.enableElement(t)}),!1}),e.delegate(m.buttonClickSelector,"click.rails",function(e){var t=u(this);if(!m.allowAction(t))return m.stopEverything(e);t.is(m.buttonDisableSelector)&&m.disableFormElement(t);var a=m.handleRemote(t);return!1===a?m.enableFormElement(t):a.fail(function(){m.enableFormElement(t)}),!1}),e.delegate(m.inputChangeSelector,"change.rails",function(e){var t=u(this);return m.allowAction(t)?(m.handleRemote(t),!1):m.stopEverything(e)}),e.delegate(m.formSubmitSelector,"submit.rails",function(e){var t,a,n=u(this),i=n.data("remote")!==c;if(!m.allowAction(n))return m.stopEverything(e);if(n.attr("novalidate")==c&&(t=m.blankInputs(n,m.requiredInputSelector))&&m.fire(n,"ajax:aborted:required",[t]))return m.stopEverything(e);if(i){if(a=m.nonBlankInputs(n,m.fileInputSelector)){setTimeout(function(){m.disableFormElements(n)},13);var r=m.fire(n,"ajax:aborted:file",[a]);return r||setTimeout(function(){m.enableFormElements(n)},13),r}return m.handleRemote(n),!1}setTimeout(function(){m.disableFormElements(n)},13)}),e.delegate(m.formInputClickSelector,"click.rails",function(e){var t=u(this);if(!m.allowAction(t))return m.stopEverything(e);var a=t.attr("name"),n=a?{name:a,value:t.val()}:null;t.closest("form").data("ujs:submit-button",n)}),e.delegate(m.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&m.disableFormElements(u(this))}),e.delegate(m.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&m.enableFormElements(u(this))}),u(function(){m.refreshCSRFTokens()}))}(jQuery);